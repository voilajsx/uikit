{"version":3,"file":"motion.js","sources":["../src/components/ui/motion.tsx"],"sourcesContent":["/**\n * Essential Animation System - Motion Components for VoilaJSX UIKit (FIXED)\n * @module @voilajsx/uikit\n * @file src/components/ui/motion.tsx\n */\n\nimport * as React from 'react';\nimport { forwardRef, useState, useEffect, useRef, useCallback } from 'react';\nimport { cva } from 'class-variance-authority';\nimport { cn } from '@/lib/utils';\n\n// Type for HTML element tag names\ntype HTMLElementTagName = keyof React.JSX.IntrinsicElements;\n\n/**\n * Animation transition configuration\n */\ninterface AnimationTransition {\n  type?: 'spring' | 'tween';\n  duration?: number;\n  delay?: number;\n  ease?: string | number[];\n  damping?: number;\n  stiffness?: number;\n  mass?: number;\n  repeat?: number;\n  repeatType?: 'loop' | 'reverse' | 'mirror';\n}\n\n/**\n * Animation state configuration\n */\ninterface AnimationState {\n  opacity?: number;\n  x?: number | string | number[];\n  y?: number | string | number[];\n  scale?: number | number[];\n  rotate?: number | number[];\n  transformOrigin?: string;\n  transition?: AnimationTransition;\n}\n\n/**\n * Animation presets for common use cases\n */\nconst AnimationPresets = {\n  // Fade animations\n  fadeIn: {\n    initial: { opacity: 0 } as AnimationState,\n    animate: { opacity: 1 } as AnimationState,\n    exit: { opacity: 0 } as AnimationState,\n  },\n  fadeInUp: {\n    initial: { opacity: 0, y: 20 } as AnimationState,\n    animate: { opacity: 1, y: 0 } as AnimationState,\n    exit: { opacity: 0, y: 20 } as AnimationState,\n  },\n  fadeInDown: {\n    initial: { opacity: 0, y: -20 } as AnimationState,\n    animate: { opacity: 1, y: 0 } as AnimationState,\n    exit: { opacity: 0, y: -20 } as AnimationState,\n  },\n  fadeInLeft: {\n    initial: { opacity: 0, x: -20 } as AnimationState,\n    animate: { opacity: 1, x: 0 } as AnimationState,\n    exit: { opacity: 0, x: -20 } as AnimationState,\n  },\n  fadeInRight: {\n    initial: { opacity: 0, x: 20 } as AnimationState,\n    animate: { opacity: 1, x: 0 } as AnimationState,\n    exit: { opacity: 0, x: 20 } as AnimationState,\n  },\n  fadeOut: {\n    initial: { opacity: 1 } as AnimationState,\n    animate: { opacity: 0 } as AnimationState,\n    exit: { opacity: 0 } as AnimationState,\n  },\n\n  // Scale animations\n  scaleIn: {\n    initial: { opacity: 0, scale: 0.8 } as AnimationState,\n    animate: { opacity: 1, scale: 1 } as AnimationState,\n    exit: { opacity: 0, scale: 0.8 } as AnimationState,\n  },\n  scaleInCenter: {\n    initial: { opacity: 0, scale: 0.9, transformOrigin: 'center' } as AnimationState,\n    animate: { opacity: 1, scale: 1, transformOrigin: 'center' } as AnimationState,\n    exit: { opacity: 0, scale: 0.9, transformOrigin: 'center' } as AnimationState,\n  },\n\n  // Slide animations\n  slideInUp: {\n    initial: { y: '100%' } as AnimationState,\n    animate: { y: 0 } as AnimationState,\n    exit: { y: '100%' } as AnimationState,\n  },\n  slideInDown: {\n    initial: { y: '-100%' } as AnimationState,\n    animate: { y: 0 } as AnimationState,\n    exit: { y: '-100%' } as AnimationState,\n  },\n  slideInLeft: {\n    initial: { x: '-100%' } as AnimationState,\n    animate: { x: 0 } as AnimationState,\n    exit: { x: '-100%' } as AnimationState,\n  },\n  slideInRight: {\n    initial: { x: '100%' } as AnimationState,\n    animate: { x: 0 } as AnimationState,\n    exit: { x: '100%' } as AnimationState,\n  },\n\n  // Special effects\n  bounce: {\n    initial: { opacity: 0, scale: 0.3 } as AnimationState,\n    animate: { \n      opacity: 1, \n      scale: 1,\n      transition: {\n        type: 'spring',\n        damping: 10,\n        stiffness: 300,\n      }\n    } as AnimationState,\n    exit: { opacity: 0, scale: 0.3 } as AnimationState,\n  },\n  elastic: {\n    initial: { opacity: 0, scale: 0 } as AnimationState,\n    animate: { \n      opacity: 1, \n      scale: 1,\n      transition: {\n        type: 'spring',\n        damping: 8,\n        stiffness: 200,\n      }\n    } as AnimationState,\n    exit: { opacity: 0, scale: 0 } as AnimationState,\n  },\n  rubberBand: {\n    initial: { scale: 1 } as AnimationState,\n    animate: { \n      scale: [1, 1.25, 0.75, 1.15, 0.95, 1],\n      transition: { duration: 1 }\n    } as AnimationState,\n  },\n  pulse: {\n    initial: { scale: 1 } as AnimationState,\n    animate: { \n      scale: [1, 1.05, 1],\n      transition: { \n        duration: 2,\n        repeat: Infinity,\n        repeatType: 'loop' as const\n      }\n    } as AnimationState,\n  },\n  wobble: {\n    initial: { rotate: 0 } as AnimationState,\n    animate: {\n      rotate: [0, -5, 5, -5, 0],\n      transition: {\n        duration: 0.5,\n        repeat: Infinity,\n        repeatType: 'loop' as const\n      }\n    } as AnimationState,\n  },\n  shake: {\n    initial: { x: 0 } as AnimationState,\n    animate: {\n      x: [0, -10, 10, -10, 10, 0],\n      transition: { duration: 0.5 }\n    } as AnimationState,\n  },\n};\n\n/**\n * Easing curves for smooth animations\n */\nconst EasingCurves = {\n  easeInOut: [0.4, 0, 0.2, 1] as const,\n  easeOut: [0, 0, 0.2, 1] as const,\n  easeIn: [0.4, 0, 1, 1] as const,\n  easeOutBack: [0.34, 1.56, 0.64, 1] as const,\n  easeInBack: [0.36, 0, 0.66, -0.56] as const,\n  easeOutBounce: [0.68, -0.55, 0.265, 1.55] as const,\n  linear: [0, 0, 1, 1] as const,\n};\n\n/**\n * Animation timing presets\n */\nconst TimingPresets = {\n  fast: 0.2,\n  normal: 0.3,\n  slow: 0.5,\n  slower: 0.8,\n  slowest: 1.2,\n} as const;\n\n/**\n * CSS animation classes\n */\nconst animationVariants = cva(\n  'transition-all',\n  {\n    variants: {\n      duration: {\n        fast: 'duration-200',\n        normal: 'duration-300',\n        slow: 'duration-500',\n        slower: 'duration-700',\n        slowest: 'duration-1000',\n      },\n      easing: {\n        linear: 'ease-linear',\n        in: 'ease-in',\n        out: 'ease-out',\n        inOut: 'ease-in-out',\n      }\n    },\n    defaultVariants: {\n      duration: 'normal',\n      easing: 'inOut',\n    }\n  }\n);\n\n/**\n * Motion component props\n */\ninterface MotionProps extends Omit<React.HTMLAttributes<HTMLElement>, 'onAnimationStart'> {\n  /** HTML element to render */\n  as?: HTMLElementTagName;\n  /** Animation preset */\n  preset?: keyof typeof AnimationPresets;\n  /** Custom initial state */\n  initial?: AnimationState;\n  /** Custom animate state */\n  animate?: AnimationState;\n  /** Custom exit state */\n  exit?: AnimationState;\n  /** Animation duration */\n  duration?: keyof typeof TimingPresets | number;\n  /** Animation delay */\n  delay?: number;\n  /** Animation easing */\n  easing?: keyof typeof EasingCurves;\n  /** Trigger animation when in view */\n  triggerInView?: boolean;\n  /** Animation repeat count */\n  repeat?: number | 'infinite';\n  /** Repeat type */\n  repeatType?: 'loop' | 'reverse' | 'mirror';\n  /** Spring physics */\n  spring?: {\n    damping?: number;\n    stiffness?: number;\n    mass?: number;\n  };\n  /** Gesture animations */\n  whileHover?: AnimationState;\n  whileTap?: AnimationState;\n  whileFocus?: AnimationState;\n  /** Animation callbacks */\n  onAnimationStart?: () => void;\n  onAnimationComplete?: () => void;\n  /** Children */\n  children: React.ReactNode;\n}\n\n/**\n * Custom hook for intersection observer\n */\nconst useInView = (threshold = 0.1): [React.RefObject<HTMLElement | null>, boolean] => {\n  const [inView, setInView] = useState(false);\n  const ref = useRef<HTMLElement | null>(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => setInView(entry.isIntersecting),\n      { threshold }\n    );\n\n    const currentElement = ref.current;\n    if (currentElement) {\n      observer.observe(currentElement);\n    }\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [threshold]);\n\n  return [ref, inView];\n};\n\n/**\n * Convert AnimationState to CSS styles\n */\nconst animationStateToCSS = (state: AnimationState): React.CSSProperties => {\n  const styles: React.CSSProperties = {};\n  \n  if (state.opacity !== undefined) styles.opacity = state.opacity;\n  if (state.transformOrigin) styles.transformOrigin = state.transformOrigin;\n  \n  const transforms: string[] = [];\n  \n  if (state.x !== undefined) {\n    if (Array.isArray(state.x)) {\n      // For keyframe animations, use the first value\n      transforms.push(`translateX(${typeof state.x[0] === 'number' ? `${state.x[0]}px` : state.x[0]})`);\n    } else {\n      transforms.push(`translateX(${typeof state.x === 'number' ? `${state.x}px` : state.x})`);\n    }\n  }\n  if (state.y !== undefined) {\n    if (Array.isArray(state.y)) {\n      // For keyframe animations, use the first value\n      transforms.push(`translateY(${typeof state.y[0] === 'number' ? `${state.y[0]}px` : state.y[0]})`);\n    } else {\n      transforms.push(`translateY(${typeof state.y === 'number' ? `${state.y}px` : state.y})`);\n    }\n  }\n  if (state.scale !== undefined) {\n    if (Array.isArray(state.scale)) {\n      // For keyframe animations, use the first value\n      transforms.push(`scale(${state.scale[0]})`);\n    } else {\n      transforms.push(`scale(${state.scale})`);\n    }\n  }\n  if (state.rotate !== undefined) {\n    if (Array.isArray(state.rotate)) {\n      // For keyframe animations, use the first value\n      transforms.push(`rotate(${state.rotate[0]}deg)`);\n    } else {\n      transforms.push(`rotate(${state.rotate}deg)`);\n    }\n  }\n  \n  if (transforms.length > 0) {\n    styles.transform = transforms.join(' ');\n  }\n  \n  return styles;\n};\n\n/**\n * Motion component with CSS animations\n */\nconst Motion = forwardRef<HTMLElement, MotionProps>(({\n  as: Component = 'div',\n  preset,\n  initial,\n  animate,\n  exit,\n  duration = 'normal',\n  delay = 0,\n  easing = 'easeInOut',\n  triggerInView = false,\n  repeat = 1,\n  repeatType = 'loop',\n  spring,\n  whileHover,\n  whileTap,\n  whileFocus,\n  onAnimationStart,\n  onAnimationComplete,\n  className,\n  style,\n  children,\n  ...props\n}, ref) => {\n  const [viewRef, inView] = useInView();\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [hasAnimated, setHasAnimated] = useState(false);\n  const elementRef = useRef<HTMLElement | null>(null);\n\n  // Merge refs\n  const mergedRef = useCallback((node: HTMLElement | null) => {\n    if (node) {\n      if (ref) {\n        if (typeof ref === 'function') ref(node);\n        else ref.current = node;\n      }\n      elementRef.current = node;\n      if (triggerInView) {\n        (viewRef as React.MutableRefObject<HTMLElement | null>).current = node;\n      }\n    }\n  }, [ref, viewRef, triggerInView]);\n\n  // Get animation preset\n  const animationPreset = preset ? AnimationPresets[preset] : null;\n\n  // Determine if animation should trigger\n  const shouldAnimate = triggerInView ? inView && !hasAnimated : true;\n\n  // Apply animations\n  useEffect(() => {\n    if (!elementRef.current || !shouldAnimate) return;\n\n    const element = elementRef.current;\n\n    const startAnimation = () => {\n      setIsAnimating(true);\n      onAnimationStart?.();\n\n      // Apply initial styles\n      const initialStyles = {\n        ...(animationPreset?.initial || {}),\n        ...(initial || {}),\n      };\n\n      const initialCSS = animationStateToCSS(initialStyles);\n      Object.assign(element.style, initialCSS);\n\n      // Apply animate styles with transition\n      const animateStyles = {\n        ...(animationPreset?.animate || {}),\n        ...(animate || {}),\n      };\n\n      const durationValue = typeof duration === 'number' ? duration : TimingPresets[duration];\n      const easingValue = EasingCurves[easing];\n\n      element.style.transition = `all ${durationValue}s cubic-bezier(${easingValue.join(',')})`;\n      \n      if (delay > 0) {\n        element.style.transitionDelay = `${delay}s`;\n      }\n\n      // Trigger reflow to ensure initial styles are applied\n      element.offsetHeight;\n\n      // Apply animation styles\n      requestAnimationFrame(() => {\n        const animateCSS = animationStateToCSS(animateStyles);\n        Object.assign(element.style, animateCSS);\n      });\n\n      // Handle animation completion\n      const handleTransitionEnd = () => {\n        setIsAnimating(false);\n        setHasAnimated(true);\n        onAnimationComplete?.();\n        element.removeEventListener('transitionend', handleTransitionEnd);\n      };\n\n      element.addEventListener('transitionend', handleTransitionEnd);\n\n      // Fallback timeout\n      const timeoutId = setTimeout(handleTransitionEnd, (durationValue + delay) * 1000 + 100);\n\n      return () => {\n        clearTimeout(timeoutId);\n        element.removeEventListener('transitionend', handleTransitionEnd);\n      };\n    };\n\n    // Handle repeat animations\n    if (repeat === 'infinite' || (typeof repeat === 'number' && repeat > 1)) {\n      const runAnimation = () => {\n        startAnimation();\n        \n        const nextDelay = (typeof duration === 'number' ? duration : TimingPresets[duration]) * 1000 + delay * 1000;\n        \n        if (repeat === 'infinite') {\n          setTimeout(runAnimation, nextDelay);\n        } else if (typeof repeat === 'number' && repeat > 1) {\n          for (let i = 1; i < repeat; i++) {\n            setTimeout(runAnimation, nextDelay * i);\n          }\n        }\n      };\n      \n      runAnimation();\n    } else {\n      return startAnimation();\n    }\n  }, [shouldAnimate, animationPreset, initial, animate, duration, delay, easing, repeat, onAnimationStart, onAnimationComplete]);\n\n  // Apply gesture styles\n  const gestureStyles: React.CSSProperties = {};\n  \n  if (whileHover || whileTap || whileFocus) {\n    gestureStyles.cursor = 'pointer';\n  }\n\n  const handleMouseEnter = (e: React.MouseEvent<HTMLElement>) => {\n    if (whileHover) {\n      const hoverCSS = animationStateToCSS(whileHover);\n      Object.assign(e.currentTarget.style, hoverCSS);\n    }\n    props.onMouseEnter?.(e);\n  };\n\n  const handleMouseLeave = (e: React.MouseEvent<HTMLElement>) => {\n    if (whileHover && animate) {\n      const animateCSS = animationStateToCSS(animate);\n      Object.assign(e.currentTarget.style, animateCSS);\n    }\n    props.onMouseLeave?.(e);\n  };\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLElement>) => {\n    if (whileTap) {\n      const tapCSS = animationStateToCSS(whileTap);\n      Object.assign(e.currentTarget.style, tapCSS);\n    }\n    props.onMouseDown?.(e);\n  };\n\n  const handleMouseUp = (e: React.MouseEvent<HTMLElement>) => {\n    if (whileTap && animate) {\n      const animateCSS = animationStateToCSS(animate);\n      Object.assign(e.currentTarget.style, animateCSS);\n    }\n    props.onMouseUp?.(e);\n  };\n\n  const handleFocus = (e: React.FocusEvent<HTMLElement>) => {\n    if (whileFocus) {\n      const focusCSS = animationStateToCSS(whileFocus);\n      Object.assign(e.currentTarget.style, focusCSS);\n    }\n    props.onFocus?.(e);\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLElement>) => {\n    if (whileFocus && animate) {\n      const animateCSS = animationStateToCSS(animate);\n      Object.assign(e.currentTarget.style, animateCSS);\n    }\n    props.onBlur?.(e);\n  };\n\n  return React.createElement(\n    Component,\n    {\n      ...props,\n      ref: mergedRef,\n      className: cn(\n        animationVariants({ \n          duration: typeof duration === 'string' ? duration : 'normal',\n          easing: easing === 'easeInOut' ? 'inOut' : easing === 'easeIn' ? 'in' : easing === 'easeOut' ? 'out' : 'linear'\n        }),\n        className\n      ),\n      style: {\n        ...gestureStyles,\n        ...style,\n      },\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave,\n      onMouseDown: handleMouseDown,\n      onMouseUp: handleMouseUp,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n    },\n    children\n  );\n});\n\nMotion.displayName = 'Motion';\n\n/**\n * Stagger container for animating multiple children\n */\ninterface StaggerProps extends React.HTMLAttributes<HTMLElement> {\n  /** Stagger delay between children */\n  stagger?: number;\n  /** Children animation preset */\n  childPreset?: keyof typeof AnimationPresets;\n  /** Custom child animation */\n  childAnimation?: {\n    initial?: AnimationState;\n    animate?: AnimationState;\n  };\n  /** Animation duration */\n  duration?: keyof typeof TimingPresets;\n  /** Trigger when in view */\n  triggerInView?: boolean;\n  /** Container element */\n  as?: HTMLElementTagName;\n  children: React.ReactNode;\n}\n\nconst Stagger = forwardRef<HTMLElement, StaggerProps>(({\n  stagger = 0.1,\n  childPreset = 'fadeInUp',\n  childAnimation,\n  duration = 'normal',\n  triggerInView = true,\n  as: Component = 'div',\n  className,\n  children,\n  ...props\n}, ref) => {\n  const [viewRef, inView] = useInView();\n  const [hasAnimated, setHasAnimated] = useState(false);\n\n  const shouldAnimate = triggerInView ? inView && !hasAnimated : true;\n\n  const childrenArray = React.Children.toArray(children);\n\n  useEffect(() => {\n    if (shouldAnimate) {\n      setHasAnimated(true);\n    }\n  }, [shouldAnimate]);\n\n  return React.createElement(\n    Component,\n    {\n      ...props,\n      ref: triggerInView ? viewRef : ref,\n      className,\n    },\n    childrenArray.map((child, index) => (\n      <Motion\n        key={index}\n        preset={childPreset}\n        initial={childAnimation?.initial}\n        animate={childAnimation?.animate}\n        duration={duration}\n        delay={shouldAnimate ? index * stagger : 0}\n        triggerInView={false}\n      >\n        {child}\n      </Motion>\n    ))\n  );\n});\n\nStagger.displayName = 'Stagger';\n\n/**\n * Presence component for exit animations\n */\ninterface PresenceProps {\n  /** Show/hide children */\n  show: boolean;\n  /** Exit animation preset */\n  exitPreset?: keyof typeof AnimationPresets;\n  /** Custom exit animation */\n  exitAnimation?: AnimationState;\n  /** Animation duration */\n  duration?: keyof typeof TimingPresets;\n  /** Callback when exit animation completes */\n  onExitComplete?: () => void;\n  children: React.ReactNode;\n}\n\nconst Presence: React.FC<PresenceProps> = ({\n  show,\n  exitPreset = 'fadeOut',\n  exitAnimation,\n  duration = 'normal',\n  onExitComplete,\n  children,\n}) => {\n  const [shouldRender, setShouldRender] = useState(show);\n  const [isExiting, setIsExiting] = useState(false);\n\n  useEffect(() => {\n    if (show) {\n      setShouldRender(true);\n      setIsExiting(false);\n    } else if (shouldRender) {\n      setIsExiting(true);\n    }\n  }, [show, shouldRender]);\n\n  const handleExitComplete = () => {\n    setShouldRender(false);\n    setIsExiting(false);\n    onExitComplete?.();\n  };\n\n  if (!shouldRender) return null;\n\n  return (\n    <Motion\n      preset={isExiting ? exitPreset : 'fadeIn'}\n      animate={isExiting ? exitAnimation : undefined}\n      duration={duration}\n      onAnimationComplete={isExiting ? handleExitComplete : undefined}\n    >\n      {children}\n    </Motion>\n  );\n};\n\n/**\n * Auto-animating counter component\n */\ninterface CounterProps {\n  /** Target number */\n  to: number;\n  /** Starting number */\n  from?: number;\n  /** Animation duration */\n  duration?: number;\n  /** Number formatting */\n  format?: (value: number) => string;\n  /** Trigger when in view */\n  triggerInView?: boolean;\n  /** Additional props */\n  className?: string;\n}\n\nconst Counter: React.FC<CounterProps> = ({\n  to,\n  from = 0,\n  duration = 2,\n  format = (value) => Math.round(value).toString(),\n  triggerInView = true,\n  className,\n}) => {\n  const [current, setCurrent] = useState(from);\n  const [viewRef, inView] = useInView();\n  const [hasAnimated, setHasAnimated] = useState(false);\n\n  const shouldAnimate = triggerInView ? inView && !hasAnimated : true;\n\n  useEffect(() => {\n    if (!shouldAnimate) return;\n\n    setHasAnimated(true);\n    \n    const startTime = Date.now();\n    const difference = to - from;\n\n    const animate = () => {\n      const elapsed = Date.now() - startTime;\n      const progress = Math.min(elapsed / (duration * 1000), 1);\n      \n      // Easing function (ease-out)\n      const eased = 1 - Math.pow(1 - progress, 3);\n      \n      setCurrent(from + difference * eased);\n\n      if (progress < 1) {\n        requestAnimationFrame(animate);\n      }\n    };\n\n    animate();\n  }, [shouldAnimate, to, from, duration]);\n\n  return (\n    <span ref={triggerInView ? viewRef : undefined} className={className}>\n      {format(current)}\n    </span>\n  );\n};\n\n/**\n * Typewriter effect component\n */\ninterface TypewriterProps {\n  /** Text to type */\n  text: string;\n  /** Typing speed (characters per second) */\n  speed?: number;\n  /** Delay before starting */\n  delay?: number;\n  /** Show cursor */\n  showCursor?: boolean;\n  /** Cursor character */\n  cursor?: string;\n  /** Loop the animation */\n  loop?: boolean;\n  /** Trigger when in view */\n  triggerInView?: boolean;\n  /** Callback when complete */\n  onComplete?: () => void;\n  /** Additional props */\n  className?: string;\n}\n\nconst Typewriter: React.FC<TypewriterProps> = ({\n  text,\n  speed = 50,\n  delay = 0,\n  showCursor = true,\n  cursor = '|',\n  loop = false,\n  triggerInView = true,\n  onComplete,\n  className,\n}) => {\n  const [displayText, setDisplayText] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [showCursorState, setShowCursorState] = useState(true);\n  const [viewRef, inView] = useInView();\n  const [hasAnimated, setHasAnimated] = useState(false);\n\n  const shouldAnimate = triggerInView ? inView && !hasAnimated : true;\n\n  // Cursor blinking effect\n  useEffect(() => {\n    if (!showCursor) return;\n    \n    const interval = setInterval(() => {\n      setShowCursorState(prev => !prev);\n    }, 500);\n\n    return () => clearInterval(interval);\n  }, [showCursor]);\n\n  // Typing effect\n  useEffect(() => {\n    if (!shouldAnimate) return;\n\n    setHasAnimated(true);\n\n    const timeout = setTimeout(() => {\n      if (currentIndex < text.length) {\n        setDisplayText(text.slice(0, currentIndex + 1));\n        setCurrentIndex(prev => prev + 1);\n      } else {\n        onComplete?.();\n        if (loop) {\n          setTimeout(() => {\n            setCurrentIndex(0);\n            setDisplayText('');\n            setHasAnimated(false);\n          }, 2000);\n        }\n      }\n    }, currentIndex === 0 ? delay : 1000 / speed);\n\n    return () => clearTimeout(timeout);\n  }, [currentIndex, text, speed, delay, loop, shouldAnimate, onComplete]);\n\n  return (\n    <span ref={triggerInView ? viewRef : undefined} className={className}>\n      {displayText}\n      {showCursor && (\n        <span className={cn('inline-block', showCursorState ? 'opacity-100' : 'opacity-0')}>\n          {cursor}\n        </span>\n      )}\n    </span>\n  );\n};\n\n/**\n * Scroll-triggered reveal component\n */\ninterface RevealProps {\n  /** Animation preset */\n  preset?: keyof typeof AnimationPresets;\n  /** Custom animation */\n  animation?: {\n    initial?: AnimationState;\n    animate?: AnimationState;\n  };\n  /** Animation duration */\n  duration?: keyof typeof TimingPresets;\n  /** Animation delay */\n  delay?: number;\n  /** Intersection threshold */\n  threshold?: number;\n  /** Animate only once */\n  once?: boolean;\n  /** Container element */\n  as?: HTMLElementTagName;\n  /** Additional props */\n  className?: string;\n  children: React.ReactNode;\n}\n\nconst Reveal: React.FC<RevealProps> = ({\n  preset = 'fadeInUp',\n  animation,\n  duration = 'normal',\n  delay = 0,\n  threshold = 0.1,\n  once = true,\n  as = 'div',\n  className,\n  children,\n}) => {\n  return (\n    <Motion\n      as={as}\n      preset={preset}\n      initial={animation?.initial}\n      animate={animation?.animate}\n      duration={duration}\n      delay={delay}\n      triggerInView\n      className={className}\n    >\n      {children}\n    </Motion>\n  );\n};\n\n/**\n * Page transition component\n */\ninterface PageTransitionProps {\n  /** Page key for transitions */\n  pageKey: string;\n  /** Transition preset */\n  preset?: keyof typeof AnimationPresets;\n  /** Animation duration */\n  duration?: keyof typeof TimingPresets;\n  children: React.ReactNode;\n}\n\nconst PageTransition: React.FC<PageTransitionProps> = ({\n  pageKey,\n  preset = 'fadeIn',\n  duration = 'normal',\n  children,\n}) => {\n  return (\n    <Motion\n      key={pageKey}\n      preset={preset}\n      duration={duration}\n    >\n      {children}\n    </Motion>\n  );\n};\n\n// Remove duplicate export block since everything is exported at function level\nexport {\n  Motion,\n  Stagger,\n  Presence,\n  Counter,\n  Typewriter,\n  Reveal,\n  PageTransition,\n  AnimationPresets,\n  EasingCurves,\n  TimingPresets,\n  useInView,\n  type AnimationState,\n  type AnimationTransition,\n  type MotionProps,\n};"],"names":["AnimationPresets","EasingCurves","TimingPresets","animationVariants","cva","useInView","threshold","inView","setInView","useState","ref","useRef","useEffect","observer","entry","currentElement","animationStateToCSS","state","styles","transforms","Motion","forwardRef","Component","preset","initial","animate","exit","duration","delay","easing","triggerInView","repeat","repeatType","spring","whileHover","whileTap","whileFocus","onAnimationStart","onAnimationComplete","className","style","children","props","viewRef","isAnimating","setIsAnimating","hasAnimated","setHasAnimated","elementRef","mergedRef","useCallback","node","animationPreset","shouldAnimate","element","startAnimation","initialStyles","initialCSS","animateStyles","durationValue","easingValue","animateCSS","handleTransitionEnd","timeoutId","runAnimation","nextDelay","i","gestureStyles","handleMouseEnter","e","hoverCSS","_a","handleMouseLeave","handleMouseDown","tapCSS","handleMouseUp","handleFocus","focusCSS","handleBlur","React","cn","Stagger","stagger","childPreset","childAnimation","childrenArray","child","index","jsx","Presence","show","exitPreset","exitAnimation","onExitComplete","shouldRender","setShouldRender","isExiting","setIsExiting","handleExitComplete","Counter","to","from","format","value","current","setCurrent","startTime","difference","elapsed","progress","eased","Typewriter","text","speed","showCursor","cursor","loop","onComplete","displayText","setDisplayText","currentIndex","setCurrentIndex","showCursorState","setShowCursorState","interval","prev","timeout","Reveal","animation","once","as","PageTransition","pageKey"],"mappings":"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"}