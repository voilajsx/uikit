{"version":3,"file":"layout-wrapper.js","sources":["../src/components/layouts/layout-wrapper.tsx"],"sourcesContent":["/**\n * @fileoverview Ultra-simple layout wrapper with standardized scheme + tone system\n * @description Uses VITE__ environment variables with zero ambiguity\n * @package @voilajsx/uikit\n * @file /src/components/layouts/layout-wrapper.tsx\n */\n\n/// <reference types=\"vite/client\" />\n\nimport React from 'react';\nimport { ThemeProvider } from '../../themes/theme-provider';\nimport { AdminLayout } from './admin';\nimport { PageLayout } from './page';\nimport { AuthLayout } from './auth';\nimport { BlankLayout } from './blank';\nimport { PopupLayout } from './popup';\nimport type { \n  NavigationItem, \n  Size, \n  Tone,\n  Theme,\n  Mode,\n  AdminLayoutScheme, \n  PageLayoutScheme,\n  AuthLayoutScheme, \n  BlankLayoutScheme, \n  PopupLayoutScheme \n} from '../../types';\n\n/**\n * Parse JSON string safely\n */\nfunction parseJSON<T>(jsonString?: string, fallback: T = [] as T): T {\n  if (!jsonString) return fallback;\n  \n  try {\n    return JSON.parse(jsonString);\n  } catch (error) {\n    console.warn('Failed to parse JSON:', jsonString);\n    return fallback;\n  }\n}\n\n/**\n * Ultra-simple layout configuration - zero ambiguity\n */\ninterface LayoutConfig {\n  // Theme system\n  theme: Theme;\n  mode: Mode;\n  detectSystem: boolean;\n  \n  // Layout selection\n  layout: string;\n  title: string;\n  logo?: string;\n  navigation: NavigationItem[];\n  \n  // Admin layout\n  adminLayout: {\n    scheme: AdminLayoutScheme;\n    tone: Tone;\n    size: Size;\n    collapsible: boolean;\n    defaultSidebarOpen: boolean;\n  };\n  \n  // Page layout\n  pageLayout: {\n    scheme: PageLayoutScheme;\n    tone: Tone;\n    size: Size;\n    position: 'sticky' | 'fixed' | 'relative';\n  };\n  \n  // Auth layout\n  authLayout: {\n    scheme: AuthLayoutScheme;\n    tone: Tone;\n    size: Size;\n    imageUrl?: string;\n    imageOverlay: 'light' | 'dark' | 'none';\n  };\n  \n  // Blank layout\n  blankLayout: {\n    scheme: BlankLayoutScheme;\n    tone: Tone;\n    size: Size;\n  };\n  \n  // Popup layout\n  popupLayout: {\n    scheme: PopupLayoutScheme;\n    tone: Tone;\n    size: Size;\n    position: 'sticky' | 'fixed' | 'relative';\n  };\n}\n\n/**\n * Read layout configuration from VITE__ environment variables\n */\nfunction getLayoutConfig(): LayoutConfig {\n  const env = import.meta.env;\n  \n  return {\n    // Theme system\n    theme: (env.VITE__LAYOUT__THEME as Theme) || 'default',\n    mode: (env.VITE__LAYOUT__MODE as Mode) || 'light',\n    detectSystem: env.VITE__LAYOUT__DETECT_SYSTEM === 'true',\n    \n    // Layout selection\n    layout: env.VITE__LAYOUT__TYPE || 'admin',\n    title: env.VITE__LAYOUT__TITLE || env.VITE__APP__NAME || 'Platform',\n    logo: env.VITE__LAYOUT__LOGO,\n    navigation: parseJSON<NavigationItem[]>(env.VITE__LAYOUT__NAVIGATION, []),\n    \n    // Admin layout\n    adminLayout: {\n      scheme: (env.VITE__LAYOUT__ADMIN__SCHEME as AdminLayoutScheme) || 'sidebar',\n      tone: (env.VITE__LAYOUT__ADMIN__TONE as Tone) || 'subtle',\n      size: (env.VITE__LAYOUT__ADMIN__SIZE as Size) || 'lg',\n      collapsible: env.VITE__LAYOUT__ADMIN__COLLAPSIBLE !== 'false',\n      defaultSidebarOpen: env.VITE__LAYOUT__ADMIN__SIDEBAR_OPEN !== 'false',\n    },\n    \n    // Page layout\n    pageLayout: {\n      scheme: (env.VITE__LAYOUT__PAGE__SCHEME as PageLayoutScheme) || 'default',\n      tone: (env.VITE__LAYOUT__PAGE__TONE as Tone) || 'clean',\n      size: (env.VITE__LAYOUT__PAGE__SIZE as Size) || 'xl',\n      position: (env.VITE__LAYOUT__PAGE__POSITION as 'sticky' | 'fixed' | 'relative') || 'sticky',\n    },\n    \n    // Auth layout\n    authLayout: {\n      scheme: (env.VITE__LAYOUT__AUTH__SCHEME as AuthLayoutScheme) || 'card',\n      tone: (env.VITE__LAYOUT__AUTH__TONE as Tone) || 'clean',\n      size: (env.VITE__LAYOUT__AUTH__SIZE as Size) || 'md',\n      imageUrl: env.VITE__LAYOUT__AUTH__IMAGE_URL,\n      imageOverlay: (env.VITE__LAYOUT__AUTH__IMAGE_OVERLAY as 'light' | 'dark' | 'none') || 'dark',\n    },\n    \n    // Blank layout\n    blankLayout: {\n      scheme: (env.VITE__LAYOUT__BLANK__SCHEME as BlankLayoutScheme) || 'default',\n      tone: (env.VITE__LAYOUT__BLANK__TONE as Tone) || 'clean',\n      size: (env.VITE__LAYOUT__BLANK__SIZE as Size) || 'lg',\n    },\n    \n    // Popup layout\n    popupLayout: {\n      scheme: (env.VITE__LAYOUT__POPUP__SCHEME as PopupLayoutScheme) || 'modal',\n      tone: (env.VITE__LAYOUT__POPUP__TONE as Tone) || 'clean',\n      size: (env.VITE__LAYOUT__POPUP__SIZE as Size) || 'md',\n      position: (env.VITE__LAYOUT__POPUP__POSITION as 'sticky' | 'fixed' | 'relative') || 'relative',\n    },\n  };\n}\n\n/**\n * Layout wrapper props - ultra-simple\n */\nexport interface LayoutWrapperProps {\n  /** App content */\n  children: React.ReactNode;\n  /** Override layout type */\n  layout?: string;\n  /** Override navigation items */\n  navigation?: NavigationItem[];\n  /** Manual config overrides */\n  overrides?: Partial<LayoutConfig>;\n}\n\n/**\n * Ultra-simple layout wrapper - zero ambiguity\n */\nexport function LayoutWrapper({ \n  children, \n  layout, \n  navigation, \n  overrides = {} \n}: LayoutWrapperProps): React.JSX.Element {\n  const config = { ...getLayoutConfig(), ...overrides };\n  \n  // Allow prop overrides\n  const finalLayout = layout || config.layout;\n  const finalNavigation = navigation || config.navigation;\n  \n  return (\n    <ThemeProvider \n      theme={config.theme} \n      mode={config.mode}\n      detectSystem={config.detectSystem}\n    >\n      {renderLayout(children, finalLayout, finalNavigation, config)}\n    </ThemeProvider>\n  );\n}\n\n/**\n * Render layout based on type - ultra-simple switch\n */\nfunction renderLayout(\n  children: React.ReactNode, \n  layout: string, \n  navigation: NavigationItem[], \n  config: LayoutConfig\n): React.JSX.Element {\n  \n  const currentPath = typeof window !== 'undefined' ? window.location.pathname : '/';\n  const logoComponent = config.logo ? <img src={config.logo} alt=\"Logo\" className=\"h-8 w-auto\" /> : undefined;\n\n  switch (layout) {\n    case 'admin':\n      return (\n        <AdminLayout\n          scheme={config.adminLayout.scheme}\n          tone={config.adminLayout.tone}\n          size={config.adminLayout.size}\n          title={config.title}\n          logo={logoComponent}\n          navigation={navigation}\n          currentPath={currentPath}\n          onNavigate={handleNavigation}\n          collapsible={config.adminLayout.collapsible}\n          defaultSidebarOpen={config.adminLayout.defaultSidebarOpen}\n        >\n          {children}\n        </AdminLayout>\n      );\n      \n    case 'page':\n      return (\n        <PageLayout \n          scheme={config.pageLayout.scheme}\n          tone={config.pageLayout.tone}\n          size={config.pageLayout.size}\n          position={config.pageLayout.position}\n          navigation={navigation}\n          currentPath={currentPath}\n          onNavigate={handleNavigation}\n          title={config.title}\n          logo={logoComponent}\n          copyright={`Â© ${new Date().getFullYear()} ${config.title}. All rights reserved.`}\n        >\n          {children}\n        </PageLayout>\n      );\n      \n    case 'auth':\n      return (\n        <AuthLayout \n          scheme={config.authLayout.scheme}\n          tone={config.authLayout.tone}\n          size={config.authLayout.size}\n          title={config.title}\n          logo={config.logo ? <img src={config.logo} alt=\"Logo\" className=\"h-16 w-auto\" /> : undefined}\n          imageUrl={config.authLayout.imageUrl}\n          imageOverlay={config.authLayout.imageOverlay}\n        >\n          {children}\n        </AuthLayout>\n      );\n      \n    case 'blank':\n      return (\n        <BlankLayout \n          scheme={config.blankLayout.scheme}\n          tone={config.blankLayout.tone}\n          size={config.blankLayout.size}\n          title={config.title}\n          logo={config.logo ? <img src={config.logo} alt=\"Logo\" className=\"h-12 w-auto\" /> : undefined}\n        >\n          {children}\n        </BlankLayout>\n      );\n      \n    case 'popup':\n      return (\n        <PopupLayout \n          scheme={config.popupLayout.scheme}\n          tone={config.popupLayout.tone}\n          size={config.popupLayout.size}\n          position={config.popupLayout.position}\n          title={config.title}\n        >\n          {children}\n        </PopupLayout>\n      );\n      \n    case 'none':\n    default:\n      // No layout wrapper - just theme provider\n      return <>{children}</>;\n  }\n}\n\n/**\n * Handle navigation events - ultra-simple logic\n */\nfunction handleNavigation(href: string, item: NavigationItem): void {\n  if (typeof window === 'undefined') return;\n  \n  // Execute onClick handler if present\n  if (item.onClick) {\n    item.onClick();\n    return;\n  }\n  \n  // Navigate to href\n  if (href) {\n    if (href.startsWith('http') || href.startsWith('//')) {\n      window.open(href, '_blank');\n    } else {\n      window.location.href = href;\n    }\n  }\n}\n\n/**\n * Hook to access layout configuration\n */\nexport function useLayoutConfig(): LayoutConfig {\n  return getLayoutConfig();\n}"],"names":["parseJSON","jsonString","fallback","getLayoutConfig","env","__vite_import_meta_env__","LayoutWrapper","children","layout","navigation","overrides","config","finalLayout","finalNavigation","jsx","ThemeProvider","renderLayout","currentPath","logoComponent","AdminLayout","handleNavigation","PageLayout","AuthLayout","BlankLayout","PopupLayout","href","item","useLayoutConfig"],"mappings":"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"}